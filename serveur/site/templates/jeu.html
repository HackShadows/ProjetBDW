{% extends "base.html" %}

{% block main_content %}

{% if REQUEST_VARS['phase'] == 'resultats' %}
<p>Félicitation, vous avez fait un score de {{ REQUEST_VARS['score'] }}</p>
{% if REQUEST_VARS['score'] == 0 %}<p>??? attendez je crois que j'ai mal lu...</p>{% endif %}
{% endif %}

<form id="jeu" action="/jeu" method="POST">

	<table>
		<tr>
			<th></th>
			{% for x in range(1,REQUEST_VARS['taille_grille']+1) %}
			<th><img src="site/static/img/tuiles/{{ REQUEST_VARS['grille'][0][x] }}"></th>
			{% endfor %}
			<th></th>
		</tr>
		{% for y in range(1,REQUEST_VARS['taille_grille']+1) %}
		<tr>
			<th><img src="site/static/img/tuiles/{{ REQUEST_VARS['grille'][y][0] }}"></th>
			{% for x in range(1,REQUEST_VARS['taille_grille']+1) %}
			<td>
				{% if REQUEST_VARS['phase'] == 'joue_carte' %}
				{% if REQUEST_VARS['grille'][y][x] is none %}
				<input type="radio" name="emplacement" value="{{ x }},{{ y }}" required>
				<div class="tuile-emplacement"></div>
				{% else %}
				<button type="button"></button>
				<img src="site/static/img/tuiles/{{ REQUEST_VARS['grille'][y][x] }}">
				{% endif %}
				{% else %}
				<img src="site/static/img/tuiles/{{ REQUEST_VARS['grille'][y][x] }}">
				{% endif %}
			</td>
			{% endfor %}
			{% if REQUEST_VARS['phase'] == 'resultats' %}
			<td class="{% if REQUEST_VARS['resultat_grille']['colonne'][y] == 0 %}tuile-score-nul{% else %}tuile-score-bien{% endif %}">+ {{ REQUEST_VARS['resultat_grille']['colonne'][y] }}</td>
			{% else %}
			<td></td>
			{% endif %}
		</tr>
		{% endfor %}
		<tr>
			<th></th>
			{% if REQUEST_VARS['phase'] == 'resultats' %}
			{% for x in range(REQUEST_VARS['taille_grille']) %}
			<td class="{% if REQUEST_VARS['resultat_grille']['ligne'][x] == 0 %}tuile-score-nul{% else %}tuile-score-bien{% endif %}">+ {{ REQUEST_VARS['resultat_grille']['ligne'][x] }}</td>
			{% endfor %}
			<td>= {{ REQUEST_VARS['score'] }}</td>
			{% else %}
			{% for x in range(REQUEST_VARS['taille_grille']) %}
			<td></td>
			{% endfor %}
			<td></td>
			{% endif %}
		</tr>
	</table>


	<ul>
		{% for tuile in REQUEST_VARS['pioche'] %}
		<li>
			{% if tuile is not none %}
			<input type="radio" name="choisie" value="{{ loop.index }}" required>
			<img src="site/static/img/tuiles/{{ tuile }}">
			{% else %}
			<div class="tuile-emplacement"></div>
			{% endif %}
		</li>
		{% endfor %}
	</ul>


</form>


<a href="/">Arrêter temporairement la partie</a>

{% endblock %}
